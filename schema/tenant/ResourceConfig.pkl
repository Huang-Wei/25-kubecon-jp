@go.Package { name = "github.com/Huang-Wei/25-kubecon-jp/go/generated/tenant/resource" }
module kubecon.demo.tenant.ResourceConfig

import "package://pkg.pkl-lang.org/pkl-go/pkl.golang@0.10.0#/go.pkl"
import ".../common/UtilConfig.pkl" as uc
import ".../common/SelectorConfig.pkl"

@uc.Nullable
kubernetes: Kubernetes

@uc.Nullable
buckets: Listing<Bucket>(isDistinctBy((it) -> it.name))

class Kubernetes {
  /// namespaces defines the Kubernetes namespaces to be created.
  @uc.Nullable
  namespaces: Listing<String>(isDistinct)

  /// selector defines the mapping Kubernetes clusters to create the resources.
  @uc.Nullable
  selector: Listing<SelectorConfig.Requirment>
}

class Bucket {
  name: String
  region: String
  @uc.Nullable
  ttl: String(matches(Regex(#"^\d+(d)$"#)))?
  @uc.Nullable
  selector: Listing<SelectorConfig.Requirment>
}
